{"version":3,"sources":["js\\initCanvas.js","js\\mark.js"],"names":["initCanvas","el","width","height","e","canvas","ctx","getContext","clickX","Array","clickY","clickDrag","clickX2","clickY2","clickDrag2","paint","$","on","parents","eq","find","clearRect","id","onmousedown","mouseX","pageX","getBoundingClientRect","x","mouseY","y","addClick","redraw","onmousemove","onmouseup","ontouchstart","preventDefault","touches","clientX","clientY","ontouchmove","ontouchhend","dragging","push","strokeStyle","lineJoin","lineWidth","i","length","beginPath","moveTo","lineTo","closePath","stroke","require","default","mark","Vue","data","wordData","hira","kata","audio","hiraStrokeOrder","kataStrokeOrder","wordSource","kataWordSource","word","methods","playAudio","Audio","play","border","String","test","v","indexOf","Number","z","slice","showDialog","$nextTick","offsetWidth","offsetHeight"],"mappings":"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","file":"mark.acf3fb30.map","sourceRoot":"..\\src","sourcesContent":["export default function initCanvas(el, width, height, e) {\r\n    var canvas = el;\r\n    var ctx = canvas.getContext(\"2d\");\r\n    var clickX = new Array();\r\n    var clickY = new Array();\r\n    var clickDrag = new Array();\r\n    var clickX2 = new Array();\r\n    var clickY2 = new Array();\r\n    var clickDrag2 = new Array();\r\n    var paint;\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n\r\n    $('.clear-canvas').on('click', function (e) {\r\n        let el = $(this).parents('.mdui-row').eq(0).find('canvas')[0]\r\n        el.getContext(\"2d\").clearRect(0,0,canvas.width,canvas.height);\r\n        if(el.id=='pad'){\r\n            clickX = new Array();\r\n            clickY = new Array();\r\n            clickDrag = new Array();\r\n        }else if(el.id=='pad2'){\r\n            clickX2 = new Array();\r\n            clickY2 = new Array();\r\n            clickDrag2 = new Array();\r\n        }\r\n    });\r\n\r\n    canvas.onmousedown = function (e) {\r\n        var mouseX = e.pageX - this.getBoundingClientRect().x;\r\n        var mouseY = e.y - this.getBoundingClientRect().y;\r\n\r\n        paint = true;\r\n        addClick(e.pageX - this.getBoundingClientRect().x, e.y - this.getBoundingClientRect().y);\r\n        redraw;\r\n    };\r\n    canvas.onmousemove = function (e) {\r\n        if (paint) {\r\n            addClick(e.pageX - this.getBoundingClientRect().x, e.y - this.getBoundingClientRect().y, true);\r\n            redraw();\r\n        }\r\n    };\r\n    canvas.onmouseup = function (e) {\r\n        paint = false;\r\n    };\r\n\r\n    canvas.ontouchstart = function (e) {\r\n        e.preventDefault();\r\n        var mouseX = e.touches[0].clientX - this.getBoundingClientRect().x;\r\n        var mouseY = e.touches[0].clientY - this.getBoundingClientRect().y;\r\n\r\n        paint = true;\r\n        addClick(e.touches[0].clientX - this.getBoundingClientRect().x, e.touches[0].clientY - this.getBoundingClientRect().y);\r\n        redraw;\r\n    }\r\n    canvas.ontouchmove = function (e) {\r\n        e.preventDefault();\r\n        if (paint) {\r\n            addClick(e.touches[0].clientX - this.getBoundingClientRect().x, e.touches[0].clientY - this.getBoundingClientRect().y, true);\r\n            redraw();\r\n        }\r\n    }\r\n    canvas.ontouchhend = (e) => {\r\n        e.preventDefault();\r\n        paint = false;\r\n    }\r\n\r\n    function addClick(x, y, dragging) {\r\n        if(canvas.id=='pad'){\r\n            clickX.push(x);\r\n            clickY.push(y);\r\n            clickDrag.push(dragging);\r\n        }else if(canvas.id=='pad2'){\r\n            clickX2.push(x);\r\n            clickY2.push(y);\r\n            clickDrag2.push(dragging);\r\n        }\r\n    }\r\n\r\n    function redraw() {\r\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\r\n        ctx.strokeStyle = \"red\";\r\n        ctx.lineJoin = \"round\";\r\n        ctx.lineWidth = 10;\r\n\r\n        if(canvas.id=='pad'){\r\n            for (var i = 0; i < clickX.length; i++) {\r\n                ctx.beginPath();\r\n                if (clickDrag[i] && i) {\r\n                    ctx.moveTo(clickX[i - 1], clickY[i - 1]);\r\n                } else {\r\n                    ctx.moveTo(clickX[i] - 1, clickY[i]);\r\n                }\r\n                ctx.lineTo(clickX[i], clickY[i]);\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n            }\r\n        }else if(canvas.id=='pad2'){\r\n            for (var i = 0; i < clickX2.length; i++) {\r\n                ctx.beginPath();\r\n                if (clickDrag2[i] && i) {\r\n                    ctx.moveTo(clickX2[i - 1], clickY2[i - 1]);\r\n                } else {\r\n                    ctx.moveTo(clickX2[i] - 1, clickY2[i]);\r\n                }\r\n                ctx.lineTo(clickX2[i], clickY2[i]);\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n            }\r\n        }\r\n    }\r\n}","(function(){\r\n    const initCanvas = require('./initCanvas').default;\r\n    let mark = new Vue({\r\n        el: '#mark-page',\r\n        data: {\r\n            wordData: {\r\n                hira: '',\r\n                kata: '',\r\n                audio: '',\r\n                hiraStrokeOrder: '',\r\n                kataStrokeOrder: '',\r\n                wordSource: '',\r\n                kataWordSource: '',\r\n\r\n            },\r\n            word: {\r\n                kata: [\r\n                    {\"kata\": \"ア\", \"hira\": \"あ\", \"audio\": \"./audio/a.mp3\", \"kataStrokeOrder\": \"./images/kataStrokeOrder/a.png\", \"hiraStrokeOrder\": \"./images/hiraStrokeOrder/a.png\", \"wordSource\": \"“安”字的草书\", \"kataWordSource\": \"“阿”字的偏旁\", \"pronunciation\": \"a\"}\r\n                ],\r\n                hira: [\r\n                    {\"kata\": \"ア\", \"hira\": \"あ\", \"audio\": \"./audio/a.mp3\", \"kataStrokeOrder\": \"./images/kataStrokeOrder/a.png\", \"hiraStrokeOrder\": \"./images/hiraStrokeOrder/a.png\", \"wordSource\": \"“安”字的草书\", \"kataWordSource\": \"“阿”字的偏旁\", \"pronunciation\": \"a\"}\r\n                ]\r\n            }\r\n        },\r\n        methods: {\r\n            playAudio: function(e, x){\r\n                if(x){\r\n                    let audio = new Audio(x)\r\n                    audio.play();\r\n                    return;\r\n                }\r\n                let audio = new Audio(this.wordData.audio)\r\n                audio.play();\r\n            },\r\n            border: (x)=>{\r\n                let e = String(x)\r\n                function test(v){\r\n                    if(v.indexOf(0)!=-1 || v.indexOf(1)!=-1 || v.indexOf(2)!=-1 || v.indexOf(3)!=-1 || v.indexOf(4)!=-1){\r\n                        return true;\r\n                    }else{\r\n                        return false\r\n                    }\r\n                }\r\n                if(Number(x)<10){\r\n                    return test(e) ? 'border' : 'border2';\r\n                }else{\r\n                    let z = e.slice(1);\r\n                    return test(z) ? 'border' : 'border2';\r\n                }\r\n            },\r\n            showDialog: function(e, hira, kata, audio, hiraStrokeOrder, kataStrokeOrder, wordSource, kataWordSource){\r\n                this.wordData.hira = hira;\r\n                this.wordData.kata = kata;\r\n                this.wordData.audio = audio;\r\n                this.wordData.hiraStrokeOrder = hiraStrokeOrder;\r\n                this.wordData.kataStrokeOrder = kataStrokeOrder;\r\n                this.wordData.wordSource = wordSource;\r\n                this.wordData.kataWordSource = kataWordSource;\r\n                this.$nextTick((e)=>{\r\n                    initCanvas($(\"#pad\")[0], $(\"#pad\")[0].offsetWidth, $(\"#pad\")[0].offsetHeight, e);\r\n                    initCanvas($(\"#pad2\")[0], $(\"#pad2\")[0].offsetWidth, $(\"#pad2\")[0].offsetHeight, e);\r\n                })\r\n            }\r\n        }\r\n    })\r\n}())"]}